% &latex
\documentclass{article}

 
\usepackage{amsthm}
\newtheorem{definition}{Definition}
\newtheorem{example}{Example}

\usepackage{amssymb}

\usepackage{outlines}
\usepackage{enumitem}
\setenumerate[1]{label=\arabic*.}
\setenumerate[2]{label=\alph*.}
\setenumerate[3]{label=\roman*.}
\setenumerate[4]{label=\alph*.}

\usepackage{graphicx}
\DeclareGraphicsRule{.tif}{png}{.png}{`convert #1 `dirname #1`/`basename #1 .tif`.png}


\input{coding.tex}




\begin{document}

%+Title
\title{Relational Algebra II}
\author{DSC 301: Lecture 11}
\date{March 12, 2021} % \today
\maketitle
%-Title

%+Abstract
%\begin{abstract}
%    There is abstract text that you should replace with your own. 
%\end{abstract}
%-Abstract



%+Contents
% \tableofcontents
%-Contents

% ---------------- %
\begin{outline}[enumerate]

\end{outline}
% ---------------- %
\begin{outline}
       
\end{outline}




% --------- Lecture Objectives ------- %
\section*{Lecture Objectives}
\begin{outline}
  \1 Review basic relational algebra      
       
   \1 Advanced (relational) algebra
   
   \1 Introducing JOINS    
       
        

\end{outline}

% --------------------------------------------------
\hspace{-0.5cm}\rule[-0.101in]{\textwidth}{0.0025in}
% --------------------------------------------------
% 
% 
%\begin{definition}
%asdfasdf
%\end{definition}









% --------   -------- %
\section*{Relational Algebra }
Recall from Lecture 3 that a relation (a.k.a. table, tuple) is a subset of a Cartesian product and a relational algebra defines a set of operation on relations.  An essential property of ALL\ algebras is the \textbf{closure} property, which says that two elements from a set combined (in some way, e.g., $+$) will remain within the set.  Symbolically, if $a,b \in R$, then $a \odot b \in R$ where $\odot$ is some operation.  
  
  
  
 
 \subsection*{Basic Operations on Relation Algebras}
  
  \begin{outline}
        \1 \textbf{Selection}: A subset of rows, $\sigma_p(R)$, where $p$ is a predicate and $R$ is a relation.  
  
    \begin{lstlisting}[frame=single] 
    SELECT * FROM Flights WHERE distance >1000; 
 \end{lstlisting} 
  
  
  

 \begin{figure}[h!] %  figure placement: here, top, bottom, or page
    \centering
    \includegraphics[width=2in]{Selection.png} 
    \caption{Selection}
    \label{fig:selection}
 \end{figure}


  
  
  \1 \textbf{Projection}: A subset of columns, $\Pi_{A_1, A_2, \dots, A_k}(R)$
  
   \begin{lstlisting}[frame=single] 
    SELECT carrier, dest FROM Flights; 
 \end{lstlisting} 
  
  
  

 \begin{figure}[h!] %  figure placement: here, top, bottom, or page
    \centering
    \includegraphics[width=2in]{Projection.png} 
    \caption{Projection}
    \label{fig:projection}
 \end{figure}


  
  
  \1 \textbf{Rename}: (alias), $\rho_A(R) \to S$.
  
  
   \begin{lstlisting}[frame=single] 
    SELECT dest as City FROM Flights; 
 \end{lstlisting} 
  
  
  \end{outline}
  
  
  
 
 
 \section*{Join Operations*}
 
 A \textbf{join} combines two or more tables\footnote{Combine one table with itself.} to retreive data from multiple tables.  Tables included in the join are listed in the \texttt{FROM} clause.  The \texttt{JOIN } itself is contained in the \texttt{WHERE} clause.  The common operators that can be used to join tables include: $=, <, >, \le, \ge, <>, !=$, \texttt{BETWEEN}, \texttt{LIKE}, and \texttt{NOT}.  Probably the most frequent operator used in joins is the $=$.  The common joins are:

 
 
  % ---------------- %
\begin{outline}[enumerate]
        \1 Inner join, $R \bowtie S$
                \2 Most common
                \2 a.k.a. Equijoin
                \2 Returns rows that have matching values in both tables
                
         \1 Outer joins
                \2 Left,  $R \ltimes S$ - Returns all rows from the ``left" table and the matched records from the ``right" table
                \2 Right,  $R \rtimes S$  - Returns all rows from the ``right"
table and the matched records from the ``left" table
                \2 Full  - Returns all records when there is a match in either the left or right table.  %R \times S$ - Returns all records when 
                
         \1 Cross join $R \times S$ - Returns EACH records from left table and ALL\ records from the right table.  
 
         \2 WARNING!!!!\ Can be dangerous!!!! 
Too many records return, slow query. 

\1 Self-join

\1 Semi-joins

\1 Theta joins

\1 Natural join
        \2 Inner join can be classified as a natural inner join


 \end{outline}
% ---------------- %
  
  
  
  
  
  
\begin{lstlisting}[frame=single]  
SELECT 
        Table1.column1, Table2.column2 
FROM 
        Table1 INNER JOIN Table2
ON 
        Table1.somecol = Table2.samecol;
\end{lstlisting} 
%
%      
  \textbf{Example}: Note the table aliases.          
                

\begin{lstlisting}[frame=single]  
SELECT 
    O.id, O.date, C.fname, C.lname
FROM
    Orders AS O
        INNER JOIN
    Customers AS C ON O.customer = C.id
ORDER BY O.date; 
\end{lstlisting} 
%
%              


         
\begin{lstlisting}[frame=single]  
SELECT 
        Table1.column1, Table2.column2 
FROM 
        Table1, Table2
WHERE 
        Table1.somecol = Table2.samecol;
\end{lstlisting} 
%
%      
  \textbf{Example}: Note the table aliases.          
                

\begin{lstlisting}[frame=single]  
SELECT 
    O.id, O.date, C.fname, C.lname
FROM
    Orders AS O,
    Customers AS C
WHERE
    O.customer = C.id
ORDER BY O.date;
\end{lstlisting} 
%
%                










  
%+Bibliography
%\begin{thebibliography}{99}
%\bibitem{Label1} ...
%\bibitem{Label2} ...
%\end{thebibliography}
%-Bibliography



 

\end{document}
